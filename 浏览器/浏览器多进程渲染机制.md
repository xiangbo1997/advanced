## 浏览器进程（chorme选项》更多工具》任务管理器）
1. 浏览器进程
2. 网络进程
3. GPU进程
4. 插件进程
5. 渲染进程
## 目标
1. 学习浏览器架构变化过程和原因
2. 浏览器从地址栏输入url到页面渲染出来发生了什么？**回流**和**重绘**对浏览器性能能的影响。
## 浏览器进程架构演化
### 进程和线程
> 进程
- 一个进程就是程序的运行实例，他由用来存放代码，运行中的数据和一个执行任务的主线程的内存组成的运行环境。
-  一个进程关闭后，会回收为该进程分配的内存，***即使该进程中由于操作不当导致内存泄露***
- 进程之间是相互隔离的，为了保护操作系统中的进程不受影响。
- 进程之间通过IPC通信
> 线程
- 线程由进程启动控制，一个进程有多个子任务，由多个线程并行执行提高执行效率
- 线程依附于进程，进程中任一线程崩溃都会导致进程崩溃**内存共享**
- 同一进程内的所有线程共享进程的资源包括**内存**和**系统的权限**
### 由单进程到多进程
> 单进程浏览器
#### 组成：
* 网络，插件，js运行环境，渲染引擎，页面都运行在同一进程
#### 问题：
- [不稳定]：插件不稳定，渲染引擎不稳定，都容易导致浏览器进程崩溃
- [不流畅]：CPU只能一时刻只能执行进程中某一线程，由于浏览器中所有的页面的模块都运行在同一线程中，同一时刻只能有一个模块执行，某个页面的模块内存泄露导致浏览器运行越来越慢
- [不安全]：插件共享浏览器的内存和权限，引发安全问题
> 多进程浏览器
#### 组成：
1. 浏览器进程：
2. 插件进程：
3. 网络进程：
4. 渲染进程：运行在安全沙箱中，限制对系统进行操作，渲染进程中的内容来源于网络，存在安全问题，不被信任。负责解析，渲染，Javascript执行，和成网页图片
5. GPU进程：
#### 优势：
1. 解决了单进程浏览器不稳定
2. 解决了单进程浏览器不安全
3. 解决了单进程浏览器不流畅
#### 劣势：
1. 更高的资源内存占用
2. 架构体系复杂，扩展性差

## 导航流程
### 定义：从用户输出url请求到页面开始解析的过程
## 步骤：
1. 浏览器进程收到用户输入的url，浏览器进程通过IPC将其发给网络进程
2. 网络进程发起真正的网络请求
3. 网络进程接收到响应数据，便解析响应头数据，并将数据转发给浏览器进程
4. 浏览器进程收到响应头数据后，发送**提交文档信息**到渲染进程
5. 渲染进程接到**提交文档信息**后开始准备接收数据，方式是和网络进程建立数据管道
6. 网络进程数据传输完，渲染进程会向浏览器进程**确认提交**，告诉浏览器进程**已经准备好接收和解析页面数据了**
7. 浏览器进程收到确认提交到消息后，导航就结束了。渲染进程开始解析页面和加载子资源，浏览器进程开始移除旧文档，然后更新浏览器页面到状态

## 渲染流程
### 渲染流水线
